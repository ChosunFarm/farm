<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!-- 여기서부터 복붙  -->
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>상품 등록</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link th:href="@{/css/font.css}" rel="stylesheet">
    <link th:href="@{/css/auction.css}" rel="stylesheet"/>

    <script th:src="@{/js/auction.js}"></script>
    <script src="/js/profileToggle.js"></script>
    <script src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js" data-color="#000000" data-border-radius="small"></script>
    <script src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script>
</head>

<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-sm">
        <nav class="max-w-full mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
            <!-- 왼쪽 로고 및 데스크톱 메뉴 -->
                <div class="flex items-center">
                    <a th:href="@{/}" class="flex-shrink-0 flex items-center">
                        <img class="h-12 w-auto" th:src="@{/images/logo2.png}" alt="농산물 경매 마켓">
                    </a>
                    <div class="hidden md:flex ml-10 space-x-4 items-center">
                        <a th:href="@{/manual}" class="block text-base text-custom hover:bg-custom hover:bg-opacity-10 px-3 py-2 rounded-md font-medium whitespace-nowrap">
                            이용방법
                        </a>
                        <a th:href="@{/mypage}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium whitespace-nowrap">
                            마이페이지
                        </a>
                        <a th:href="@{/live_auction}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium whitespace-nowrap">
                            실시간 경매
                        </a>
                        <a th:href="@{/scheduled}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium whitespace-nowrap">
                            경매 예정 상품
                        </a>
                    </div>
                </div>
            <!-- 데스크톱 검색 및 로그인/회원가입 버튼 -->
                <div class="hidden md:flex items-center">
                    <div id="profile-container-full" class="relative" th:if="${isLogin}">
                        <button id="profileBtn-full" class="flex items-center gap-2 ml-auto whitespace-nowrap">
                            <img class="w-8 h-8 rounded-full object-cover" th:src="@{/images/profile.png}" alt="프로필 이미지">
                            <span class="text-sm text-gray-900 font-medium" th:text="${username} + '님'"></span>
                        </button>
                        <div id="dropdownMenu-full" class="hidden absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-md py-2 z-10">
                            <a th:href="@{/mypage}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">내 프로필</a>
                            <a th:href="@{/logout}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">로그아웃</a>
                        </div>
                    </div>    
                  <!-- 로그인하지 않은 경우: 로그인/회원가입 버튼 표시 -->
                    <div class="flex gap-2 ml-auto" th:if="${!isLogin}">
                        <i class="ri-user-line text-gray-400"></i>
                        <a th:href="@{/login}">
                            <button class="px-4 py-2 text-sm font-medium rounded-md bg-black text-white hover:bg-black/80 whitespace-nowrap">
                            로그인
                            </button>
                        </a>
                        <a th:href="@{/login}">
                            <button class="px-4 py-2 text-sm font-medium rounded-md border border-black text-black hover:bg-black/10 whitespace-nowrap">
                            회원가입
                            </button>
                        </a>
                    </div>
                </div>
            <!-- 모바일 햄버거 버튼 -->
                <div class="flex items-center md:hidden">
                    <button id="mobile-menu-button"
                        class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500
                        hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-custom"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">메인 메뉴 열기</span>
                        <svg class="block h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- 모바일 메뉴 -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a th:href="@{/manual}" class="block text-base text-custom hover:bg-custom hover:bg-opacity-10 px-3 py-2 rounded-md font-medium">
                    이용방법
                </a>
                <a th:href="@{/mypage}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium">
                    마이페이지
                </a>
                <a th:href="@{/live-auction}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium">
                    실시간 경매
                </a>
                <a th:href="@{/scheduled}" class="block text-base text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md font-medium">
                    경매 예정 상품
                </a>
                <div id="profile-container-half" class="relative" th:if="${isLogin}">
                    <button id="profileBtn-half" class="flex items-center gap-2 ml-auto whitespace-nowrap">
                        <img class="w-8 h-8 rounded-full object-cover" th:src="@{/images/profile.png}" alt="프로필 이미지">
                        <span class="text-sm text-gray-900 font-medium" th:text="${username} + '님'"></span>
                    </button>
                    <div id="dropdownMenu-half" class="hidden absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-md py-2 z-10">
                        <a th:href="@{/mypage}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">내 프로필</a>
                        <a th:href="@{/logout}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">로그아웃</a>
                    </div>
                </div>  
            </div>         
            <!-- 로그인하지 않은 경우: 로그인/회원가입 버튼 표시 -->
            <div class="flex gap-2 ml-auto" th:if="${!isLogin}">
                <i class="ri-user-line text-gray-400"></i>
                <a th:href="@{/login}">
                    <button class="px-4 py-2 text-sm font-medium rounded-md bg-black text-white hover:bg-black/80 whitespace-nowrap">
                        로그인
                    </button>
                </a>
                <a th:href="@{/login}">
                    <button class="px-4 py-2 text-sm font-medium rounded-md border border-black text-black hover:bg-black/10 whitespace-nowrap">
                        회원가입
                    </button>
                </a>
            </div>
        </div>
    </header>
    <div class="max-w-8xl mx-auto px-8 sm:px-10 lg:px-16 py-8">
        <main class="mt-0">
            <div class="bg-white shadow rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h1 class="text-xl font-medium text-gray-900">상품 등록</h1>
                    <p class="text-xs text-red-600 mt-2">*검수 후 경매 일정을 확정할 수 있습니다.</p>
                    <p class="text-xs text-red-600 mt-2">*검수 완료까지 최대 2일이 소요됩니다.</p>
                </div>
                <form th:action="@{/auction}" method="post" enctype="multipart/form-data" class="space-y-8">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 px-4">
                        <div class="sm:col-span-1">
                            <label for="category" class="block text-sm font-medium text-gray-700">상품 종류</label>
                            <select id="category" name="category" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-custom focus:border-custom !rounded-button">
                                <option value="">상품 종류</option>
                                <option value="F">과일</option>
                                <option value="V">채소</option>
                                <option value="G">곡물</option>
                            </select>
                        </div>
                        <!-- 상품명 -->
                        <div class="mb-4">
                            <label for="name" class="block text-gray-700 text-sm font-medium mb-2">상품명</label>
                            <input type="text" id="name" name="name"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-custom focus:border-custom"
                                   placeholder="상품명을 입력하세요">
                            <!-- 현재 로그인한 사용자 ID를 전달하기 위한 숨겨진 필드 -->
                            <input type="hidden" name="memberId" th:if="${#authentication != null && #authentication.principal != null}" th:value="${#authentication.principal.id}" />
                        </div>
                        <!-- 품목별 이름 (과일명/채소명/곡물명) - 카테고리에 따라 동적으로 표시
                        <div class="mb-4 fruit-field" style="display: none;">
                            <label for="fruitName" class="block text-gray-700 text-sm font-medium mb-2">과일명</label>
                            <input type="text" id="fruitName" name="fruitName"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-custom focus:border-custom"
                                   placeholder="과일명을 입력하세요">
                        </div>

                        <div class="mb-4 vegetable-field" style="display: none;">
                            <label for="vegetableName" class="block text-gray-700 text-sm font-medium mb-2">채소명</label>
                            <input type="text" id="vegetableName" name="vegetableName"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-custom focus:border-custom"
                                   placeholder="채소명을 입력하세요">
                        </div>

                        <div class="mb-4 grain-field" style="display: none;">
                            <label for="grainName" class="block text-gray-700 text-sm font-medium mb-2">곡물명</label>
                            <input type="text" id="grainName" name="grainName"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-custom focus:border-custom"
                                   placeholder="곡물명을 입력하세요">
                        </div> -->
                        <div class="mb-4" id="dynamicField" style="display: none;">
                            <label id="dynamicLabel" class="block text-gray-700 text-sm font-medium mb-2"></label>
                            <input type="text" id="dynamicInput"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-custom focus:border-custom"
                                   placeholder="">
                        </div>

                        <div class="sm:col-span-1">
                            <label for="price" class="block text-sm font-medium text-gray-700">시작 금액 (원)</label>
                            <input type="number" name="price" id="price"
                                   class="mt-1 block w-full border-gray-300 focus:ring-custom focus:border-custom !rounded-button" 
                                   placeholder="시작 금액을 입력하세요"/>
                        </div>

                        <div class="mb-4">
                            <label for="stockQuantity" class="block text-sm font-medium text-gray-700">수량</label>
                            <input type="number" id="stockQuantity" name="stockQuantity"
                                   class="mt-1 block w-full border-gray-300 focus:ring-custom focus:border-custom !rounded-button"
                                   placeholder="수량을 입력하세요">
                        </div>

                        <div class="sm:col-span-1">
                            <label for="gram" class="block text-sm font-medium text-gray-700">판매량 (g)</label>
                            <input type="number" name="gram" id="gram" 
                                   class="mt-1 block w-full border-gray-300 focus:ring-custom focus:border-custom !rounded-button" 
                                   placeholder="판매량을 입력하세요"/>
                        </div>

                        <div class="sm:col-span-3">
                            <label for="description" class="block text-sm font-medium text-gray-700">상품 설명</label>
                            <textarea id="description" name="description" rows="4" 
                                      class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-custom focus:border-custom !rounded-button" 
                                      placeholder="상품에 대한 상세 설명을 입력하세요"></textarea>
                        </div>
                        
                        <div class="sm:col-span-3">
                            <label class="block text-sm font-medium text-gray-700">상품 이미지</label>
                            <div class="flex text-sm text-gray-600">
                                <label for="file" class="my-upload-label ml-auto">
                                    <span>이미지 업로드</span>
                                    <input id="file" name="imageFile" type="file" accept = "image/*" onchange="loadFiles(this)" class="sr-only" multiple/>
                                </label>                                          
                            </div>
                            <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg">
                                <div class="space-y-1 text-center">
                                    <i id="uploadIcon" class="fas fa-image text-gray-400 text-3xl mb-3"></i>
                                    <!-- <img id="previewImg" src="" alt="미리보기" style="max-width: 300px; display: none; margin: 1rem auto 0;" /> -->
                                    <div id="previewContainer" class="flex flex-wrap justify-center gap-2"></div>
                                </div>
                            </div>
                        </div>
                        <div class="sm:col-span-3">
                            <label class="block text-sm font-medium text-gray-700">경매 일자</label>
                            <div class="mt-1 flex items-center gap-4">
                                <div class="relative inline-block w-48 mr-2">
                                    <select name="year" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-custom focus:border-custom !rounded-button">
                                        <option>2024년</option>
                                        <option>2025년</option>
                                        <option>2026년</option>
                                    </select>
                                </div>
                                <div class="relative inline-block w-48 mr-2">
                                    <select name="month" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-custom focus:border-custom !rounded-button">
                                        <option>1월</option>
                                        <option>2월</option>
                                        <option>3월</option>
                                        <option>4월</option>
                                        <option>5월</option>
                                        <option>6월</option>
                                        <option>7월</option>
                                        <option>8월</option>
                                        <option>9월</option>
                                        <option>10월</option>
                                        <option>11월</option>
                                        <option>12월</option>
                                    </select>
                                </div>
                                <div class="relative inline-block w-48">
                                    <select name="day" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-custom focus:border-custom !rounded-button">
                                        <option>1일</option>
                                        <option>2일</option>
                                        <option>3일</option>
                                        <option>4일</option>
                                        <option>5일</option>
                                        <option>6일</option>
                                        <option>7일</option>
                                        <option>8일</option>
                                        <option>9일</option>
                                        <option>10일</option>
                                        <option>11일</option>
                                        <option>12일</option>
                                        <option>13일</option>
                                        <option>14일</option>
                                        <option>15일</option>
                                        <option>16일</option>
                                        <option>17일</option>
                                        <option>18일</option>
                                        <option>19일</option>
                                        <option>20일</option>
                                        <option>21일</option>
                                        <option>22일</option>
                                        <option>23일</option>
                                        <option>24일</option>
                                        <option>25일</option>
                                        <option>26일</option>
                                        <option>27일</option>
                                        <option>28일</option>
                                        <option>29일</option>
                                        <option>30일</option>
                                        <option>31일</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 경매 일자까지 입력 영역 -->
                    <!-- 버튼/문구 영역 -->
                    <div class="mt-6 border-t border-gray-200 pt-4 flex flex-col items-end gap-2">
                        <div class="flex space-x-3">
                            <button type="submit"
                                    class="bg-gray-500 text-white px-6 py-2 !rounded-button hover:bg-gray-600
                                        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                                상품 등록하기
                            </button>
                        </div>
                        <p class="text-xs text-red-600">
                            ※ 검수 후에 상품 등록되는데 2일 정도 소요됩니다.
                        </p>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <script th:src="@{/js/moblie.js}"></script>
    <script th:src="@{/js/auction.js}"></script>
</body>
</html>